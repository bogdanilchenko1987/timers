{"mappings":"AAAA,SAAAA,kBAAAC,EAAAC,I,m8BAAA,IAAMC,KAAO,CACXC,MAAOC,SAASC,cAAc,aAC9BC,UAAWF,SAASC,cAAc,iBAClCE,OAAQH,SAASC,cAAc,eAKjC,SAASG,UACP,IAAIC,EAAU,EAEbC,mBAAGR,KAAKI,UAAUK,UAAUC,SAAQ,SAAAC,G,OAAQA,EAAIC,YAAc,E,IAC/DZ,KAAKK,OAAOO,YAAc,GAC1B,IAAMC,EAAWL,mBAAIR,KAAKI,UAAUK,UAAUK,KAAI,SAACC,EAAGC,G,OAAMC,aAAaD,E,IACzEE,QAAQC,IAAIN,GACZO,QAAQC,WAAWR,GAAUS,MAAK,SAAAC,GAChCC,YAAW,WACTD,EAAMb,SAAQ,SAACe,EAAMT,GACC,cAAhBS,EAAKC,SACPnB,GAAW,GAEbP,KAAKI,UAAUK,SAASO,GAAGJ,YAAca,EAAKE,OAASF,EAAKG,OAE5DJ,YAAW,WACLxB,KAAKI,UAAUK,SAASoB,OAAS,IAAMb,IACrCT,IAAYP,KAAKI,UAAUK,SAASoB,QAAWtB,EAGjDuB,MAAM,QAFNA,MAAM,U,GAKT,I,GACF,I,OAKT,SAASb,eACP,OAAO,IAAIG,SAAQ,SAACW,EAAKC,GACRC,KAAKC,SAEP,GACXH,EAAI,MAEDC,EAAC,K,IAtCVhC,KAAKC,MAAMkC,iBAAiB,QAAS7B","sources":["src/js/game.js"],"sourcesContent":["const refs = {\n  start: document.querySelector('.js-start'),\n  container: document.querySelector('.js-container'),\n  winner: document.querySelector('.js-winner'),\n};\n\nrefs.start.addEventListener('click', onStart);\n\nfunction onStart() {\n  let counter = 0;\n\n  [...refs.container.children].forEach(box => (box.textContent = ''));\n  refs.winner.textContent = '';\n  const promises = [...refs.container.children].map((_, i) => creatPromise(i));\n  console.log(promises);\n  Promise.allSettled(promises).then(items => {\n    setTimeout(() => {\n      items.forEach((item, i) => {\n        if (item.status === 'fulfilled') {\n          counter += 1;\n        }\n        refs.container.children[i].textContent = item.value || item.reason;\n\n        setTimeout(() => {\n          if (refs.container.children.length - 1 === i) {\n            if (counter === refs.container.children.length || !counter) {\n              alert('Winner');\n            } else {\n              alert('Lost');\n            }\n          }\n        }, 500);\n      }, 1000);\n    });\n  });\n}\n\nfunction creatPromise() {\n  return new Promise((res, rej) => {\n    const random = Math.random();\n\n    if (random > 0.5) {\n      res('🤑');\n    } else {\n      rej('😡');\n    }\n  });\n}\n\n// стандартний спосіб\n// ----------------\n// refs.start.addEventListener('click', onStart);\n\n// function onStart() {\n//   const result = [];\n\n//   [...refs.container.children].forEach(box => (box.textContent = ''));\n//   refs.winner.textContent = '';\n//   [...refs.container.children].forEach((box, i) => {\n//     creatPromise(i)\n//       .then(smile => {\n//         box.textContent = smile;\n//         result.push('1');\n//       })\n//       .catch(smile => {\n//         box.textContent = smile;\n//       })\n//       .finally(() => {\n//         setTimeout(() => {\n//           if ((i = refs.container.children.length - 1)) {\n//             if (!result.length || result.length === 3) {\n//               refs.winner.textContent = '🎉🎉Winner';\n//             } else {\n//               refs.winner.textContent = '😢Lost money';\n//             }\n//           }\n//         }, 1000);\n//       });\n//   });\n// }\n\n// function creatPromise(delay) {\n//   return new Promise((res, rej) => {\n//     setTimeout(() => {\n//       const random = Math.random();\n\n//       if (random > 0.5) {\n//         res('🤑');\n//       } else {\n//         rej('😡');\n//       }\n//     }, delay * 500);\n//   });\n// }\n"],"names":["_arrayLikeToArray","arr","len","refs","start","document","querySelector","container","winner","onStart","counter","_toConsumableArray","children","forEach","box","textContent","promises","map","_","i","creatPromise","console","log","Promise","allSettled","then","items","setTimeout","item","status","value","reason","length","alert","res","rej","Math","random","addEventListener"],"version":3,"file":"game.a01b9997.js.map"}